import{a as H}from"./chunk-V4XD765B.js";import{a as L,b as p,c as q,d as N,f as $,g as z,h as j,i as A,j as G,k as V,l as R,m as U,n as B}from"./chunk-PQ5YSAXG.js";import{a as D,b as w}from"./chunk-MC5E54Q4.js";import{A as d,B as g,D as f,E as c,F as k,G as S,H as r,I as t,J as x,L as _,M as m,N as i,O as C,P as v,Q as M,V as y,W as E,X as P,aa as F,ba as T,ga as O,ka as I,n as h,w as a,x as b}from"./chunk-MFXF5D3M.js";var Y=(n,l)=>l.id;function J(n,l){if(n&1&&(r(0,"div",4)(1,"span",29),i(2,"\u2705"),t(),i(3),t()),n&2){let e=m();a(3),v(" ",e.successMessage," ")}}function K(n,l){if(n&1&&(r(0,"div",11),i(1),t()),n&2){let e=m();a(),C(e.getFieldError("title"))}}function Q(n,l){if(n&1&&(r(0,"div",11),i(1),t()),n&2){let e=m();a(),C(e.getFieldError("description"))}}function W(n,l){if(n&1&&(r(0,"div",11),i(1),t()),n&2){let e=m();a(),C(e.getFieldError("priority"))}}function X(n,l){if(n&1&&(r(0,"option",23),i(1),t()),n&2){let e=l.$implicit;g("value",e.id),a(),M("",e.name," (",e.role,")")}}function Z(n,l){if(n&1&&(r(0,"div",11),i(1),t()),n&2){let e=m();a(),C(e.getFieldError("assigneeId"))}}function ee(n,l){if(n&1&&(r(0,"div",11),i(1),t()),n&2){let e=m();a(),C(e.getFieldError("dueDate"))}}function te(n,l){n&1&&(r(0,"span",3),i(1,"\u23F3"),t(),i(2," Creating... "))}function ie(n,l){n&1&&(r(0,"span",3),i(1,"\u2795"),t(),i(2," Create Task "))}var ue=(()=>{class n{constructor(e,s,o,u){this.fb=e,this.taskService=s,this.userService=o,this.router=u,this.isSubmitting=!1,this.successMessage="",this.users$=this.userService.getAllUsers(),this.taskForm=this.fb.group({title:["",[p.required,p.minLength(1),p.maxLength(100)]],description:["",[p.maxLength(500)]],priority:["",p.required],assigneeId:["",p.required],dueDate:[""]})}ngOnInit(){this.taskForm.patchValue({priority:"Medium"})}onSubmit(){if(this.taskForm.valid&&!this.isSubmitting){this.isSubmitting=!0;let e=this.taskForm.value,s={title:e.title.trim(),description:e.description?.trim()||void 0,priority:e.priority,assigneeId:e.assigneeId,dueDate:e.dueDate?new Date(e.dueDate):void 0},u=this.taskService.createTask(s,"4");this.successMessage=`Task "${u.title}" created successfully!`,setTimeout(()=>{this.router.navigate(["/tasks"])},1500)}else this.markFormGroupTouched()}onCancel(){this.router.navigate(["/tasks"])}markFormGroupTouched(){Object.keys(this.taskForm.controls).forEach(e=>{this.taskForm.get(e)?.markAsTouched()})}getFieldError(e){let s=this.taskForm.get(e);if(s?.errors&&s.touched){if(s.errors.required)return`${this.getFieldLabel(e)} is required`;if(s.errors.minlength)return`${this.getFieldLabel(e)} must be at least ${s.errors.minlength.requiredLength} characters`;if(s.errors.maxlength)return`${this.getFieldLabel(e)} must not exceed ${s.errors.maxlength.requiredLength} characters`}return""}getFieldLabel(e){return{title:"Title",description:"Description",priority:"Priority",assigneeId:"Assignee",dueDate:"Due Date"}[e]||e}getCharacterCount(){return this.taskForm.get("description")?.value?.length||0}getMinDate(){return new Date().toISOString().split("T")[0]}isFieldInvalid(e){let s=this.taskForm.get(e);return!!(s?.errors&&s.touched)}static{this.\u0275fac=function(s){return new(s||n)(b(R),b(w),b(H),b(O))}}static{this.\u0275cmp=h({type:n,selectors:[["app-create-task"]],standalone:!0,features:[y],decls:64,vars:24,consts:[[1,"create-task-container"],[1,"page-header"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"btn-icon"],[1,"success-message"],[1,"form-container"],[1,"task-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","title",1,"form-label"],[1,"required"],["id","title","type","text","formControlName","title","placeholder","Enter task title",1,"form-input"],[1,"error-message"],["for","description",1,"form-label"],["id","description","formControlName","description","placeholder","Enter task description (optional)","rows","4",1,"form-textarea"],[1,"character-count"],["for","priority",1,"form-label"],["id","priority","formControlName","priority",1,"form-select"],["value",""],["value","Low"],["value","Medium"],["value","High"],["for","assignee",1,"form-label"],["id","assignee","formControlName","assigneeId",1,"form-select"],[3,"value"],["for","dueDate",1,"form-label"],["id","dueDate","type","date","formControlName","dueDate",1,"form-input",3,"min"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"success-icon"]],template:function(s,o){s&1&&(x(0,"app-navigation"),r(1,"div",0)(2,"div",1)(3,"h1"),i(4,"Create New Task"),t(),r(5,"button",2),_("click",function(){return o.onCancel()}),r(6,"span",3),i(7,"\u2190"),t(),i(8," Back to Tasks "),t()(),d(9,J,4,1,"div",4),r(10,"div",5)(11,"form",6),_("ngSubmit",function(){return o.onSubmit()}),r(12,"div",7)(13,"label",8),i(14," Title "),r(15,"span",9),i(16,"*"),t()(),x(17,"input",10),d(18,K,2,1,"div",11),t(),r(19,"div",7)(20,"label",12),i(21,"Description"),t(),x(22,"textarea",13),r(23,"div",14),i(24),t(),d(25,Q,2,1,"div",11),t(),r(26,"div",7)(27,"label",15),i(28," Priority "),r(29,"span",9),i(30,"*"),t()(),r(31,"select",16)(32,"option",17),i(33,"Select Priority"),t(),r(34,"option",18),i(35,"Low"),t(),r(36,"option",19),i(37,"Medium"),t(),r(38,"option",20),i(39,"High"),t()(),d(40,W,2,1,"div",11),t(),r(41,"div",7)(42,"label",21),i(43," Assignee "),r(44,"span",9),i(45,"*"),t()(),r(46,"select",22)(47,"option",17),i(48,"Select Assignee"),t(),k(49,X,2,3,"option",23,Y),E(51,"async"),t(),d(52,Z,2,1,"div",11),t(),r(53,"div",7)(54,"label",24),i(55,"Due Date"),t(),x(56,"input",25),d(57,ee,2,1,"div",11),t(),r(58,"div",26)(59,"button",27),_("click",function(){return o.onCancel()}),i(60," Cancel "),t(),r(61,"button",28),d(62,te,3,0)(63,ie,3,0),t()()()()()),s&2&&(a(9),c(9,o.successMessage?9:-1),a(2),g("formGroup",o.taskForm),a(6),f("error",o.isFieldInvalid("title")),a(),c(18,o.getFieldError("title")?18:-1),a(4),f("error",o.isFieldInvalid("description")),a(2),v(" ",o.getCharacterCount(),"/500 characters "),a(),c(25,o.getFieldError("description")?25:-1),a(6),f("error",o.isFieldInvalid("priority")),a(9),c(40,o.getFieldError("priority")?40:-1),a(6),f("error",o.isFieldInvalid("assigneeId")),a(3),S(P(51,22,o.users$)),a(3),c(52,o.getFieldError("assigneeId")?52:-1),a(4),f("error",o.isFieldInvalid("dueDate")),g("min",o.getMinDate()),a(),c(57,o.getFieldError("dueDate")?57:-1),a(2),g("disabled",o.isSubmitting),a(2),g("disabled",o.isSubmitting||o.taskForm.invalid),a(),c(62,o.isSubmitting?62:63))},dependencies:[T,F,I,U,$,G,V,L,A,q,N,B,z,j,D],styles:[".create-task-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1f2937;font-size:2rem;margin:0}.success-message[_ngcontent-%COMP%]{background:#d1fae5;border:1px solid #a7f3d0;color:#065f46;padding:1rem;border-radius:8px;margin-bottom:2rem;display:flex;align-items:center;gap:.5rem;font-weight:600}.success-icon[_ngcontent-%COMP%]{font-size:1.2rem}.form-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 4px 6px #0000000d;border:1px solid #e5e7eb}.task-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-label[_ngcontent-%COMP%]{font-weight:600;color:#374151;font-size:.875rem}.required[_ngcontent-%COMP%]{color:#ef4444}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{padding:.75rem;border:2px solid #e5e7eb;border-radius:8px;font-size:1rem;transition:border-color .2s ease,box-shadow .2s ease;font-family:inherit}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-input.error[_ngcontent-%COMP%], .form-textarea.error[_ngcontent-%COMP%], .form-select.error[_ngcontent-%COMP%]{border-color:#ef4444}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.character-count[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280;text-align:right}.error-message[_ngcontent-%COMP%]{color:#ef4444;font-size:.875rem;font-weight:500}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:1rem;padding-top:1.5rem;border-top:1px solid #e5e7eb}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;border-radius:8px;text-decoration:none;font-weight:600;transition:all .2s ease;border:none;cursor:pointer;font-size:1rem}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px #667eea4d}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#374151;border:2px solid #e5e7eb}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f9fafb;border-color:#d1d5db;transform:translateY(-2px)}.btn-icon[_ngcontent-%COMP%]{font-size:1.2rem}@media (max-width: 768px){.create-task-container[_ngcontent-%COMP%]{padding:1rem}.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:stretch}.form-container[_ngcontent-%COMP%]{padding:1.5rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.btn[_ngcontent-%COMP%]{justify-content:center}}"]})}}return n})();export{ue as CreateTaskComponent};
