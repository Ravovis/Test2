import './polyfills.server.mjs';
import{a as Y}from"./chunk-NQQGX2VB.mjs";import{a as I,b as g,c as V,d as $,f as z,g as N,h as q,i as R,j as L,k as j,l as G,m as B,n as Q}from"./chunk-WJHT7FIY.mjs";import{a as D}from"./chunk-SPRODXD5.mjs";import{$ as n,Da as F,Ea as T,H as a,I as v,O as b,P as _,Q as O,R as h,S as m,T as E,U as y,V as i,W as t,X as M,Xa as A,Y as S,Z as u,_ as l,aa as d,ba as x,ha as w,ia as U,ja as k,o as P,t as p,u as f}from"./chunk-3LKYKCQ5.mjs";import"./chunk-VVCT4QZE.mjs";var H=(o,c)=>c.id;function J(o,c){if(o&1&&(i(0,"div",4)(1,"span",10),n(2,"\u2705"),t(),n(3),t()),o&2){let e=l();a(3),x(" ",e.successMessage," ")}}function K(o,c){if(o&1&&(i(0,"div",5)(1,"span",11),n(2,"\u274C"),t(),n(3),t()),o&2){let e=l();a(3),x(" ",e.errorMessage," ")}}function W(o,c){if(o&1&&(i(0,"div",5),n(1),t()),o&2){let e=l(2);a(),d(e.getFieldError("name"))}}function X(o,c){if(o&1&&(i(0,"div",5),n(1),t()),o&2){let e=l(2);a(),d(e.getFieldError("email"))}}function Z(o,c){if(o&1&&(i(0,"div",5),n(1),t()),o&2){let e=l(2);a(),d(e.getFieldError("role"))}}function ee(o,c){if(o&1&&(i(0,"span",3),n(1,"\u23F3"),t(),n(2)),o&2){let e=l(2);a(2),x(" ",e.editingUser?"Updating...":"Creating..."," ")}}function te(o,c){if(o&1&&(i(0,"span",3),n(1,"\u{1F4BE}"),t(),n(2)),o&2){let e=l(2);a(2),x(" ",e.editingUser?"Update User":"Create User"," ")}}function ne(o,c){if(o&1){let e=S();i(0,"div",6)(1,"div",12)(2,"h2"),n(3),t(),i(4,"button",13),u("click",function(){p(e);let s=l();return f(s.onCancel())}),n(5," Cancel "),t()(),i(6,"form",14),u("ngSubmit",function(){p(e);let s=l();return f(s.onSubmit())}),i(7,"div",15)(8,"div",16)(9,"label",17),n(10," Name "),i(11,"span",18),n(12,"*"),t()(),M(13,"input",19),b(14,W,2,1,"div",5),t(),i(15,"div",16)(16,"label",20),n(17," Email "),i(18,"span",18),n(19,"*"),t()(),M(20,"input",21),b(21,X,2,1,"div",5),t()(),i(22,"div",16)(23,"label",22),n(24," Role "),i(25,"span",18),n(26,"*"),t()(),i(27,"select",23)(28,"option",24),n(29,"Select Role"),t(),i(30,"option",25),n(31,"Developer"),t(),i(32,"option",26),n(33,"Designer"),t(),i(34,"option",27),n(35,"QA"),t(),i(36,"option",28),n(37,"Manager"),t()(),b(38,Z,2,1,"div",5),t(),i(39,"div",29)(40,"button",30),u("click",function(){p(e);let s=l();return f(s.onCancel())}),n(41," Cancel "),t(),i(42,"button",31),b(43,ee,3,1)(44,te,3,1),t()()()()}if(o&2){let e=l();a(3),d(e.editingUser?"Edit User":"Add New User"),a(3),_("formGroup",e.userForm),a(7),h("error",e.isFieldInvalid("name")),a(),m(14,e.getFieldError("name")?14:-1),a(6),h("error",e.isFieldInvalid("email")),a(),m(21,e.getFieldError("email")?21:-1),a(6),h("error",e.isFieldInvalid("role")),a(11),m(38,e.getFieldError("role")?38:-1),a(2),_("disabled",e.isSubmitting),a(2),_("disabled",e.isSubmitting||e.userForm.invalid),a(),m(43,e.isSubmitting?43:44)}}function ie(o,c){if(o&1){let e=S();i(0,"tr",9)(1,"td",32),n(2),t(),i(3,"td",33),n(4),t(),i(5,"td")(6,"span",34),n(7),t()(),i(8,"td",35)(9,"span",36),n(10),t()(),i(11,"td",37)(12,"button",38),u("click",function(){let s=p(e).$implicit,C=l();return f(C.onEditUser(s))}),i(13,"span",3),n(14,"\u270F\uFE0F"),t(),n(15," Edit "),t(),i(16,"button",39),u("click",function(){let s=p(e).$implicit,C=l();return f(C.onDeleteUser(s))}),i(17,"span",3),n(18,"\u{1F5D1}\uFE0F"),t(),n(19," Delete "),t()()()}if(o&2){let e=c.$implicit,r=l();a(2),d(e.name),a(2),d(e.email),a(2),O("background-color",r.getRoleColor(e.role)),a(),x(" ",e.role," "),a(3),d(e.assignedTasksCount),a(6),_("disabled",e.assignedTasksCount>0)("title",e.assignedTasksCount>0?"Cannot delete user with assigned tasks":"Delete user")}}var ue=(()=>{class o{constructor(e,r){this.fb=e,this.userService=r,this.showAddForm=!1,this.editingUser=null,this.isSubmitting=!1,this.successMessage="",this.errorMessage="",this.users$=this.userService.getAllUsers(),this.userForm=this.fb.group({name:["",[g.required,g.minLength(1),g.maxLength(50)]],email:["",[g.required,g.email]],role:["",g.required]})}ngOnInit(){this.userService.updateAssignedTasksCount()}onAddUser(){this.showAddForm=!0,this.editingUser=null,this.userForm.reset(),this.clearMessages()}onEditUser(e){this.editingUser=e,this.showAddForm=!0,this.userForm.patchValue({name:e.name,email:e.email,role:e.role}),this.clearMessages()}onCancel(){this.showAddForm=!1,this.editingUser=null,this.userForm.reset(),this.clearMessages()}onSubmit(){if(this.userForm.valid&&!this.isSubmitting){this.isSubmitting=!0,this.clearMessages();let e=this.userForm.value;try{if(this.editingUser){let r=this.userService.updateUser(this.editingUser.id,{name:e.name.trim(),email:e.email.trim(),role:e.role});r&&(this.successMessage=`User "${r.name}" updated successfully!`,this.userService.updateAssignedTasksCount())}else{let r={name:e.name.trim(),email:e.email.trim(),role:e.role},s=this.userService.createUser(r);this.successMessage=`User "${s.name}" created successfully!`,this.userService.updateAssignedTasksCount()}this.onCancel()}catch(r){this.errorMessage=r instanceof Error?r.message:"An error occurred"}finally{this.isSubmitting=!1}}else this.markFormGroupTouched()}onDeleteUser(e){if(e.assignedTasksCount>0){this.errorMessage=`Cannot delete user "${e.name}" because they have ${e.assignedTasksCount} assigned task(s).`;return}if(confirm(`Are you sure you want to delete user "${e.name}"?`))try{this.userService.deleteUser(e.id)&&(this.successMessage=`User "${e.name}" deleted successfully!`,this.userService.updateAssignedTasksCount())}catch(r){this.errorMessage=r instanceof Error?r.message:"An error occurred"}}markFormGroupTouched(){Object.keys(this.userForm.controls).forEach(e=>{this.userForm.get(e)?.markAsTouched()})}getFieldError(e){let r=this.userForm.get(e);if(r?.errors&&r.touched){if(r.errors.required)return`${this.getFieldLabel(e)} is required`;if(r.errors.email)return"Please enter a valid email address";if(r.errors.minlength)return`${this.getFieldLabel(e)} must be at least ${r.errors.minlength.requiredLength} characters`;if(r.errors.maxlength)return`${this.getFieldLabel(e)} must not exceed ${r.errors.maxlength.requiredLength} characters`}return""}getFieldLabel(e){return{name:"Name",email:"Email",role:"Role"}[e]||e}isFieldInvalid(e){let r=this.userForm.get(e);return!!(r?.errors&&r.touched)}getRoleColor(e){switch(e){case"Manager":return"#8b5cf6";case"Developer":return"#3b82f6";case"Designer":return"#f59e0b";case"QA":return"#10b981";default:return"#6b7280"}}clearMessages(){this.successMessage="",this.errorMessage=""}static{this.\u0275fac=function(r){return new(r||o)(v(G),v(Y))}}static{this.\u0275cmp=P({type:o,selectors:[["app-user-management"]],standalone:!0,features:[w],decls:32,vars:5,consts:[[1,"user-management-container"],[1,"page-header"],["type","button",1,"btn","btn-primary",3,"click"],[1,"btn-icon"],[1,"success-message"],[1,"error-message"],[1,"form-container"],[1,"table-container"],[1,"users-table"],[1,"user-row"],[1,"success-icon"],[1,"error-icon"],[1,"form-header"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"user-form",3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],["for","name",1,"form-label"],[1,"required"],["id","name","type","text","formControlName","name","placeholder","Enter user name",1,"form-input"],["for","email",1,"form-label"],["id","email","type","email","formControlName","email","placeholder","Enter email address",1,"form-input"],["for","role",1,"form-label"],["id","role","formControlName","role",1,"form-select"],["value",""],["value","Developer"],["value","Designer"],["value","QA"],["value","Manager"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"user-name"],[1,"user-email"],[1,"role-badge"],[1,"task-count"],[1,"count-badge"],[1,"actions"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["type","button",1,"btn","btn-sm","btn-danger",3,"click","disabled","title"]],template:function(r,s){r&1&&(M(0,"app-navigation"),i(1,"div",0)(2,"div",1)(3,"h1"),n(4,"User Management"),t(),i(5,"button",2),u("click",function(){return s.onAddUser()}),i(6,"span",3),n(7,"\u2795"),t(),n(8," Add New User "),t()(),b(9,J,4,1,"div",4)(10,K,4,1,"div",5)(11,ne,45,14,"div",6),i(12,"div",7)(13,"h2"),n(14,"All Users"),t(),i(15,"table",8)(16,"thead")(17,"tr")(18,"th"),n(19,"Name"),t(),i(20,"th"),n(21,"Email"),t(),i(22,"th"),n(23,"Role"),t(),i(24,"th"),n(25,"Assigned Tasks"),t(),i(26,"th"),n(27,"Actions"),t()()(),i(28,"tbody"),E(29,ie,20,8,"tr",9,H),U(31,"async"),t()()()()),r&2&&(a(9),m(9,s.successMessage?9:-1),a(),m(10,s.errorMessage?10:-1),a(),m(11,s.showAddForm?11:-1),a(18),y(k(31,3,s.users$)))},dependencies:[T,F,A,B,z,L,j,I,R,V,$,Q,N,q,D],styles:[".user-management-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1f2937;font-size:2rem;margin:0}.success-message[_ngcontent-%COMP%]{background:#d1fae5;border:1px solid #a7f3d0;color:#065f46;padding:1rem;border-radius:8px;margin-bottom:2rem;display:flex;align-items:center;gap:.5rem;font-weight:600}.success-icon[_ngcontent-%COMP%]{font-size:1.2rem}.error-message[_ngcontent-%COMP%]{background:#fee2e2;border:1px solid #fecaca;color:#991b1b;padding:1rem;border-radius:8px;margin-bottom:2rem;display:flex;align-items:center;gap:.5rem;font-weight:600}.error-icon[_ngcontent-%COMP%]{font-size:1.2rem}.form-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;margin-bottom:2rem;box-shadow:0 4px 6px #0000000d;border:1px solid #e5e7eb}.form-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1f2937;font-size:1.5rem;margin:0}.user-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-label[_ngcontent-%COMP%]{font-weight:600;color:#374151;font-size:.875rem}.required[_ngcontent-%COMP%]{color:#ef4444}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{padding:.75rem;border:2px solid #e5e7eb;border-radius:8px;font-size:1rem;transition:border-color .2s ease,box-shadow .2s ease;font-family:inherit}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-input.error[_ngcontent-%COMP%], .form-select.error[_ngcontent-%COMP%]{border-color:#ef4444}.error-message[_ngcontent-%COMP%]{color:#ef4444;font-size:.875rem;font-weight:500}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:1rem;padding-top:1.5rem;border-top:1px solid #e5e7eb}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 6px #0000000d;border:1px solid #e5e7eb}.table-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1f2937;font-size:1.5rem;margin:0;padding:2rem 2rem 1rem}.users-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fafb;padding:1rem;text-align:left;font-weight:600;color:#374151;border-bottom:2px solid #e5e7eb}.users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #e5e7eb;vertical-align:middle}.user-row[_ngcontent-%COMP%]{transition:background-color .2s ease}.user-row[_ngcontent-%COMP%]:hover{background:#f9fafb}.user-name[_ngcontent-%COMP%]{font-weight:600;color:#1f2937}.user-email[_ngcontent-%COMP%]{color:#374151}.role-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:20px;font-size:.75rem;font-weight:600;color:#fff;text-transform:uppercase}.task-count[_ngcontent-%COMP%]{text-align:center}.count-badge[_ngcontent-%COMP%]{display:inline-block;background:#e5e7eb;color:#374151;padding:.25rem .5rem;border-radius:12px;font-size:.75rem;font-weight:600;min-width:24px;text-align:center}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;border-radius:8px;text-decoration:none;font-weight:600;transition:all .2s ease;border:none;cursor:pointer;font-size:1rem}.btn-sm[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.875rem}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px #667eea4d}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#374151;border:2px solid #e5e7eb}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f9fafb;border-color:#d1d5db;transform:translateY(-2px)}.btn-danger[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:#dc2626;transform:translateY(-2px);box-shadow:0 8px 25px #ef44444d}.btn-icon[_ngcontent-%COMP%]{font-size:1.2rem}@media (max-width: 768px){.user-management-container[_ngcontent-%COMP%]{padding:1rem}.page-header[_ngcontent-%COMP%], .form-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:stretch}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.users-table[_ngcontent-%COMP%]{font-size:.875rem}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem}.actions[_ngcontent-%COMP%]{flex-direction:column}.btn[_ngcontent-%COMP%]{justify-content:center}}"]})}}return o})();export{ue as UserManagementComponent};
