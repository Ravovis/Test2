import './polyfills.server.mjs';
import{a as K}from"./chunk-NQQGX2VB.mjs";import{a as B,b as f,c as j,d as A,f as q,g as $,h as U,i as G,j as H,k as R,l as Y,m as J,n as Q}from"./chunk-WJHT7FIY.mjs";import{a as z,b as L}from"./chunk-SPRODXD5.mjs";import{$ as n,Da as w,Ea as F,H as a,I as h,O as c,P as x,Q as D,Qa as I,R as C,S as m,T as y,Ta as V,U as E,V as i,W as e,X as b,Xa as N,Y as v,Z as g,_ as d,aa as p,ba as k,ca as S,ha as P,ia as M,ja as O,o as T,t as u,u as _}from"./chunk-3LKYKCQ5.mjs";import"./chunk-VVCT4QZE.mjs";var W=(o,s)=>s.id;function tt(o,s){if(o&1){let t=v();i(0,"button",11),g("click",function(){u(t);let l=d(2);return _(l.onEdit())}),i(1,"span",5),n(2,"\u270F\uFE0F"),e(),n(3," Edit "),e(),i(4,"button",12),g("click",function(){u(t);let l=d(2);return _(l.onDelete())}),i(5,"span",5),n(6,"\u{1F5D1}\uFE0F"),e(),n(7," Delete "),e()}}function et(o,s){if(o&1&&(i(0,"div",14)(1,"label"),n(2,"Due Date"),e(),i(3,"span"),n(4),e()()),o&2){let t=d(3);a(4),p(t.formatDate(t.task.dueDate))}}function it(o,s){if(o&1&&(i(0,"div",17)(1,"label"),n(2,"Description"),e(),i(3,"div",18),n(4),e()()),o&2){let t=d(3);a(4),p(t.task.description)}}function nt(o,s){if(o&1&&(i(0,"div",13)(1,"div",14)(2,"label"),n(3,"Status"),e(),i(4,"span",15),n(5),e()(),i(6,"div",14)(7,"label"),n(8,"Priority"),e(),i(9,"span",16),n(10),e()(),i(11,"div",14)(12,"label"),n(13,"Assignee"),e(),i(14,"span"),n(15),e()(),i(16,"div",14)(17,"label"),n(18,"Created"),e(),i(19,"span"),n(20),e()(),i(21,"div",14)(22,"label"),n(23,"Last Updated"),e(),i(24,"span"),n(25),e()(),c(26,et,5,1,"div",14),e(),c(27,it,5,1,"div",17)),o&2){let t=d(2);a(4),D("background-color",t.getStatusColor(t.task.status)),a(),k(" ",t.task.status," "),a(4),D("background-color",t.getPriorityColor(t.task.priority)),a(),k(" ",t.task.priority," "),a(5),p(t.task.assigneeName),a(5),p(t.formatDate(t.task.createdDate)),a(5),p(t.formatDate(t.task.updatedDate)),a(),m(26,t.task.dueDate?26:-1),a(),m(27,t.task.description?27:-1)}}function ot(o,s){if(o&1&&(i(0,"div",25),n(1),e()),o&2){let t=d(3);a(),p(t.getFieldError("title"))}}function at(o,s){if(o&1&&(i(0,"div",25),n(1),e()),o&2){let t=d(3);a(),p(t.getFieldError("status"))}}function rt(o,s){if(o&1&&(i(0,"div",25),n(1),e()),o&2){let t=d(3);a(),p(t.getFieldError("priority"))}}function lt(o,s){if(o&1&&(i(0,"option",38),n(1),e()),o&2){let t=s.$implicit;x("value",t.id),a(),S("",t.name," (",t.role,")")}}function st(o,s){if(o&1&&(i(0,"div",25),n(1),e()),o&2){let t=d(3);a(),p(t.getFieldError("assigneeId"))}}function dt(o,s){if(o&1&&(i(0,"div",25),n(1),e()),o&2){let t=d(3);a(),p(t.getFieldError("dueDate"))}}function ct(o,s){if(o&1&&(i(0,"div",25),n(1),e()),o&2){let t=d(3);a(),p(t.getFieldError("description"))}}function mt(o,s){if(o&1){let t=v();i(0,"form",19)(1,"div",20)(2,"div",21)(3,"label",22),n(4," Title "),i(5,"span",23),n(6,"*"),e()(),b(7,"input",24),c(8,ot,2,1,"div",25),e()(),i(9,"div",20)(10,"div",21)(11,"label",26),n(12," Status "),i(13,"span",23),n(14,"*"),e()(),i(15,"select",27)(16,"option",28),n(17,"To Do"),e(),i(18,"option",29),n(19,"In Progress"),e(),i(20,"option",30),n(21,"Done"),e()(),c(22,at,2,1,"div",25),e(),i(23,"div",21)(24,"label",31),n(25," Priority "),i(26,"span",23),n(27,"*"),e()(),i(28,"select",32)(29,"option",33),n(30,"Low"),e(),i(31,"option",34),n(32,"Medium"),e(),i(33,"option",35),n(34,"High"),e()(),c(35,rt,2,1,"div",25),e()(),i(36,"div",20)(37,"div",21)(38,"label",36),n(39," Assignee "),i(40,"span",23),n(41,"*"),e()(),i(42,"select",37),y(43,lt,2,3,"option",38,W),M(45,"async"),e(),c(46,st,2,1,"div",25),e(),i(47,"div",21)(48,"label",39),n(49,"Due Date"),e(),b(50,"input",40),c(51,dt,2,1,"div",25),e()(),i(52,"div",21)(53,"label",41),n(54,"Description"),e(),b(55,"textarea",42),i(56,"div",43),n(57),e(),c(58,ct,2,1,"div",25),e(),i(59,"div",44)(60,"button",4),g("click",function(){u(t);let l=d(2);return _(l.onCancel())}),n(61," Cancel "),e(),i(62,"button",45),g("click",function(){u(t);let l=d(2);return _(l.onSave())}),i(63,"span",5),n(64,"\u{1F4BE}"),e(),n(65," Save Changes "),e()()()}if(o&2){let t=d(2);x("formGroup",t.taskForm),a(7),C("error",t.isFieldInvalid("title")),a(),m(8,t.getFieldError("title")?8:-1),a(7),C("error",t.isFieldInvalid("status")),a(7),m(22,t.getFieldError("status")?22:-1),a(6),C("error",t.isFieldInvalid("priority")),a(7),m(35,t.getFieldError("priority")?35:-1),a(7),C("error",t.isFieldInvalid("assigneeId")),a(),E(O(45,22,t.users$)),a(3),m(46,t.getFieldError("assigneeId")?46:-1),a(4),C("error",t.isFieldInvalid("dueDate")),x("min",t.getMinDate()),a(),m(51,t.getFieldError("dueDate")?51:-1),a(4),C("error",t.isFieldInvalid("description")),a(2),k(" ",t.getCharacterCount(),"/500 characters "),a(),m(58,t.getFieldError("description")?58:-1),a(4),x("disabled",t.taskForm.invalid)}}function pt(o,s){o&1&&n(0," \u2795 ")}function ut(o,s){o&1&&n(0," \u270F\uFE0F ")}function _t(o,s){o&1&&n(0," \u2705 ")}function gt(o,s){o&1&&n(0," \u{1F4DD} ")}function ft(o,s){if(o&1&&(i(0,"div",10)(1,"div",46),c(2,pt,1,0)(3,ut,1,0)(4,_t,1,0)(5,gt,1,0),e(),i(6,"div",47)(7,"div",48),n(8),e(),i(9,"div",49),n(10),e()()()),o&2){let t,r=s.$implicit,l=d(2);a(2),m(2,(t=r.action)==="created"?2:t==="updated"?3:t==="completed"?4:5),a(6),k(" Task ",r.action," "),a(2),S(" by ",r.userName," \u2022 ",l.formatDate(r.timestamp)," ")}}function xt(o,s){if(o&1){let t=v();i(0,"div",2)(1,"div",3)(2,"button",4),g("click",function(){u(t);let l=d();return _(l.onBack())}),i(3,"span",5),n(4,"\u2190"),e(),n(5," Back to Tasks "),e(),i(6,"h1"),n(7),e()(),i(8,"div",6),c(9,tt,8,0),e()(),i(10,"div",7),c(11,nt,28,11)(12,mt,66,24),e(),i(13,"div",8)(14,"h3"),n(15,"Task History"),e(),i(16,"div",9),y(17,ft,11,4,"div",10,W),e()()}if(o&2){let t=d();a(7),p(t.task.title),a(2),m(9,t.isEditing?-1:9),a(2),m(11,t.isEditing?12:11),a(6),E(t.getTaskHistory())}}function Ct(o,s){o&1&&(i(0,"div",50)(1,"p"),n(2,"Loading task..."),e()())}function ht(o,s){o&1&&(i(0,"span",5),n(1,"\u23F3"),e(),n(2," Deleting... "))}function kt(o,s){o&1&&(i(0,"span",5),n(1,"\u{1F5D1}\uFE0F"),e(),n(2," Delete Task "))}function bt(o,s){if(o&1){let t=v();i(0,"div",51),g("click",function(){u(t);let l=d();return _(l.cancelDelete())}),i(1,"div",52),g("click",function(l){return u(t),_(l.stopPropagation())}),i(2,"h3"),n(3,"Delete Task"),e(),i(4,"p"),n(5,"Are you sure you want to delete the task "),i(6,"strong"),n(7),e(),n(8,"?"),e(),i(9,"p",53),n(10,"This action cannot be undone."),e(),i(11,"div",54)(12,"button",55),g("click",function(){u(t);let l=d();return _(l.cancelDelete())}),n(13," Cancel "),e(),i(14,"button",56),g("click",function(){u(t);let l=d();return _(l.confirmDelete())}),c(15,ht,3,0)(16,kt,3,0),e()()()()}if(o&2){let t=d();a(7),k('"',t.task==null?null:t.task.title,'"'),a(5),x("disabled",t.isDeleting),a(2),x("disabled",t.isDeleting),a(),m(15,t.isDeleting?15:16)}}var Ft=(()=>{class o{constructor(t,r,l,X,Z){this.route=t,this.router=r,this.fb=l,this.taskService=X,this.userService=Z,this.task=null,this.isEditing=!1,this.isDeleting=!1,this.showDeleteConfirm=!1,this.users$=this.userService.getAllUsers(),this.taskForm=this.fb.group({title:["",[f.required,f.minLength(1),f.maxLength(100)]],description:["",[f.maxLength(500)]],status:["",f.required],priority:["",f.required],assigneeId:["",f.required],dueDate:[""]})}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&this.loadTask(t)}loadTask(t){if(this.task=this.taskService.getTaskById(t)||null,!this.task){this.router.navigate(["/tasks"]);return}this.populateForm()}populateForm(){this.task&&this.taskForm.patchValue({title:this.task.title,description:this.task.description||"",status:this.task.status,priority:this.task.priority,assigneeId:this.task.assigneeId,dueDate:this.task.dueDate?this.formatDateForInput(this.task.dueDate):""})}onEdit(){this.isEditing=!0}onSave(){if(this.taskForm.valid&&this.task){let t=this.taskForm.value,r={title:t.title.trim(),description:t.description?.trim()||void 0,status:t.status,priority:t.priority,assigneeId:t.assigneeId,dueDate:t.dueDate?new Date(t.dueDate):void 0},l=this.taskService.updateTask(this.task.id,r,"4");l&&(this.task=l,this.isEditing=!1)}else this.markFormGroupTouched()}onCancel(){this.isEditing=!1,this.populateForm()}onDelete(){this.showDeleteConfirm=!0}confirmDelete(){this.task&&(this.isDeleting=!0,this.taskService.deleteTask(this.task.id)&&this.router.navigate(["/tasks"]))}cancelDelete(){this.showDeleteConfirm=!1,this.isDeleting=!1}onBack(){this.router.navigate(["/tasks"])}markFormGroupTouched(){Object.keys(this.taskForm.controls).forEach(t=>{this.taskForm.get(t)?.markAsTouched()})}getFieldError(t){let r=this.taskForm.get(t);if(r?.errors&&r.touched){if(r.errors.required)return`${this.getFieldLabel(t)} is required`;if(r.errors.minlength)return`${this.getFieldLabel(t)} must be at least ${r.errors.minlength.requiredLength} characters`;if(r.errors.maxlength)return`${this.getFieldLabel(t)} must not exceed ${r.errors.maxlength.requiredLength} characters`}return""}getFieldLabel(t){return{title:"Title",description:"Description",status:"Status",priority:"Priority",assigneeId:"Assignee",dueDate:"Due Date"}[t]||t}getCharacterCount(){return this.taskForm.get("description")?.value?.length||0}getMinDate(){return new Date().toISOString().split("T")[0]}isFieldInvalid(t){let r=this.taskForm.get(t);return!!(r?.errors&&r.touched)}getPriorityColor(t){switch(t){case"High":return"#ef4444";case"Medium":return"#f59e0b";case"Low":return"#10b981";default:return"#6b7280"}}getStatusColor(t){switch(t){case"Done":return"#10b981";case"In Progress":return"#f59e0b";case"To Do":return"#6b7280";default:return"#6b7280"}}formatDate(t){return new Date(t).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}formatDateForInput(t){return new Date(t).toISOString().split("T")[0]}getTaskHistory(){if(!this.task)return[];let t=[{id:"1",taskId:this.task.id,action:"created",timestamp:this.task.createdDate,userId:this.task.createdBy,userName:this.getUserNameById(this.task.createdBy)}];return this.task.updatedDate.getTime()!==this.task.createdDate.getTime()&&t.push({id:"2",taskId:this.task.id,action:"updated",timestamp:this.task.updatedDate,userId:this.task.createdBy,userName:this.getUserNameById(this.task.createdBy)}),t.sort((r,l)=>l.timestamp.getTime()-r.timestamp.getTime())}getUserNameById(t){return[{id:"1",name:"John Developer"},{id:"2",name:"Sarah Designer"},{id:"3",name:"Mike QA"},{id:"4",name:"Lisa Manager"}].find(l=>l.id===t)?.name||"Unknown User"}static{this.\u0275fac=function(r){return new(r||o)(h(I),h(V),h(Y),h(L),h(K))}}static{this.\u0275cmp=T({type:o,selectors:[["app-task-detail"]],standalone:!0,features:[P],decls:5,vars:2,consts:[[1,"task-detail-container"],[1,"modal-overlay"],[1,"page-header"],[1,"header-left"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"btn-icon"],[1,"header-actions"],[1,"task-info"],[1,"task-history"],[1,"history-list"],[1,"history-item"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"info-grid"],[1,"info-item"],[1,"status-badge"],[1,"priority-badge"],[1,"description-section"],[1,"description-content"],[1,"edit-form",3,"formGroup"],[1,"form-row"],[1,"form-group"],["for","title",1,"form-label"],[1,"required"],["id","title","type","text","formControlName","title",1,"form-input"],[1,"error-message"],["for","status",1,"form-label"],["id","status","formControlName","status",1,"form-select"],["value","To Do"],["value","In Progress"],["value","Done"],["for","priority",1,"form-label"],["id","priority","formControlName","priority",1,"form-select"],["value","Low"],["value","Medium"],["value","High"],["for","assignee",1,"form-label"],["id","assignee","formControlName","assigneeId",1,"form-select"],[3,"value"],["for","dueDate",1,"form-label"],["id","dueDate","type","date","formControlName","dueDate",1,"form-input",3,"min"],["for","description",1,"form-label"],["id","description","formControlName","description","rows","4",1,"form-textarea"],[1,"character-count"],[1,"form-actions"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"history-icon"],[1,"history-content"],[1,"history-title"],[1,"history-meta"],[1,"loading"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"warning"],[1,"modal-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","button",1,"btn","btn-danger",3,"click","disabled"]],template:function(r,l){r&1&&(b(0,"app-navigation"),i(1,"div",0),c(2,xt,19,3)(3,Ct,3,0),e(),c(4,bt,17,4,"div",1)),r&2&&(a(2),m(2,l.task?2:3),a(2),m(4,l.showDeleteConfirm?4:-1))},dependencies:[F,w,N,J,q,H,R,B,G,j,A,Q,$,U,z],styles:[".task-detail-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:2rem}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:2rem;gap:1rem}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1f2937;font-size:2rem;margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.task-info[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;margin-bottom:2rem;box-shadow:0 4px 6px #0000000d;border:1px solid #e5e7eb}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem;margin-bottom:1.5rem}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#374151;font-size:.875rem}.info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#1f2937}.status-badge[_ngcontent-%COMP%], .priority-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:20px;font-size:.75rem;font-weight:600;color:#fff;text-transform:uppercase;width:fit-content}.description-section[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid #e5e7eb}.description-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#374151;font-size:.875rem;margin-bottom:.5rem;display:block}.description-content[_ngcontent-%COMP%]{color:#1f2937;line-height:1.6;white-space:pre-wrap}.edit-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-label[_ngcontent-%COMP%]{font-weight:600;color:#374151;font-size:.875rem}.required[_ngcontent-%COMP%]{color:#ef4444}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{padding:.75rem;border:2px solid #e5e7eb;border-radius:8px;font-size:1rem;transition:border-color .2s ease,box-shadow .2s ease;font-family:inherit}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-input.error[_ngcontent-%COMP%], .form-textarea.error[_ngcontent-%COMP%], .form-select.error[_ngcontent-%COMP%]{border-color:#ef4444}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.character-count[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280;text-align:right}.error-message[_ngcontent-%COMP%]{color:#ef4444;font-size:.875rem;font-weight:500}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:1rem;padding-top:1.5rem;border-top:1px solid #e5e7eb}.task-history[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 4px 6px #0000000d;border:1px solid #e5e7eb}.task-history[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1f2937;margin-bottom:1.5rem;font-size:1.25rem}.history-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.history-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;border-radius:8px;background:#f9fafb;transition:background-color .2s ease}.history-item[_ngcontent-%COMP%]:hover{background:#f3f4f6}.history-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:#e5e7eb;display:flex;align-items:center;justify-content:center;font-size:1.2rem;flex-shrink:0}.history-content[_ngcontent-%COMP%]{flex:1}.history-title[_ngcontent-%COMP%]{font-weight:600;color:#1f2937;margin-bottom:.25rem}.history-meta[_ngcontent-%COMP%]{color:#6b7280;font-size:.875rem}.loading[_ngcontent-%COMP%]{text-align:center;padding:4rem;color:#6b7280}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;border-radius:8px;text-decoration:none;font-weight:600;transition:all .2s ease;border:none;cursor:pointer;font-size:1rem}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px #667eea4d}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#374151;border:2px solid #e5e7eb}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f9fafb;border-color:#d1d5db;transform:translateY(-2px)}.btn-danger[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:#dc2626;transform:translateY(-2px);box-shadow:0 8px 25px #ef44444d}.btn-icon[_ngcontent-%COMP%]{font-size:1.2rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;max-width:500px;width:90%;box-shadow:0 20px 25px #0000001a}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1f2937;margin-bottom:1rem;font-size:1.25rem}.modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#374151;margin-bottom:1rem;line-height:1.6}.warning[_ngcontent-%COMP%]{color:#ef4444;font-weight:600}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:2rem}@media (max-width: 768px){.task-detail-container[_ngcontent-%COMP%]{padding:1rem}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.header-left[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem}.header-actions[_ngcontent-%COMP%]{justify-content:stretch}.btn[_ngcontent-%COMP%]{flex:1;justify-content:center}.info-grid[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%], .modal-actions[_ngcontent-%COMP%]{flex-direction:column}}"]})}}return o})();export{Ft as TaskDetailComponent};
